// SERVER/data/cards_extended.js
// Расширенная версия характеристик с большим разнообразием и детализацией

// Вспомогательные функции
const ABC = 'ABCDEFGHJKLMNPQRSTUVWXYZ123456789';
const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
const code4 = () =>
  Array.from({ length: 4 }, () => ABC[Math.floor(Math.random() * ABC.length)]).join('');

// ===== ОСНОВНЫЕ ХАРАКТЕРИСТИКИ (расширенные) =====

const GENDERS = [
  'Мужчина',
  'Женщина',
  'Небинарный',
  'Агендер',
  'Гендерфлюид',
];

const BODIES = [
  'Худощавый (45-55 кг)',
  'Спортивный (65-75 кг)',
  'Крупный (90-110 кг)',
  'Средний (60-70 кг)',
  'Атлетичный (75-85 кг)',
  'Хрупкий (40-50 кг)',
  'Мускулистый (85-95 кг)',
  'Плотный (80-95 кг)',
  'Стройный (55-65 кг)',
  'Массивный (110-130 кг)',
  'Подтянутый (70-80 кг)',
  'Тяжеловесный (95-115 кг)',
];

const TRAITS = [
  'Харизматичный (вдохновляет других)',
  'Спокойный (не паникует)',
  'Импульсивный (быстрые решения)',
  'Рациональный (логичный подход)',
  'Лидер (организует группу)',
  'Тихий (не конфликтует)',
  'Агрессивный (защищает силой)',
  'Мудрый (жизненный опыт)',
  'Оптимистичный (поддерживает моральный дух)',
  'Пессимистичный (реалист)',
  'Креативный (нестандартные решения)',
  'Педантичный (внимание к деталям)',
  'Эмпатичный (чувствует других)',
  'Расчётливый (планирует наперёд)',
  'Авантюрный (идёт на риск)',
  'Осторожный (избегает опасностей)',
  'Дипломатичный (решает конфликты)',
  'Упрямый (не сдаётся)',
  'Адаптивный (быстро привыкает)',
  'Независимый (самостоятельный)',
];

// ПРОФЕССИИ - НЕ ИЗМЕНЯЮТСЯ (как в оригинале)
const PROFESSIONS = [
  'Кузнец (Эксперт)',
  'Окулист (Любитель)',
  'Лингвист (Новичок)',
  'Военнослужащий (Опытный)',
  'Программист (Профессионал)',
  'Врач (Специалист)',
  'Учитель (Методист)',
  'Инженер (Конструктор)',
  'Повар (Шеф)',
  'Психолог (Консультант)',
  'Спасатель (Профессионал)',
  'Строитель (Бригадир)',
  'Водитель (Дальнобойщик)',
  'Полицейский (Детектив)',
  'Пилот (Капитан)',
  'Моряк (Старпом)',
  'Артист (Заслуженный)',
  'Журналист (Редактор)',
  'Биолог (Исследователь)',
  'Химик (Лаборант)'
];

const HEALTHS = [
  'Астма (лёгкая)',
  'Здоров (отличное состояние)',
  'Гемофилия (плохая свёртываемость)',
  'Аллергия на пыльцу',
  'Диабет 1 типа (инсулин)',
  'Диабет 2 типа (диета)',
  'Сердечная недостаточность (лекарства)',
  'Отличное здоровье (спортсмен)',
  'Слабое зрение (-4 диоптрии)',
  'Близорукость (-6 диоптрий)',
  'Дальтонизм (красно-зелёный)',
  'Артрит (суставы)',
  'Мигрени (периодические)',
  'Гипертония (высокое давление)',
  'Гипотония (низкое давление)',
  'Хронический бронхит',
  'Язва желудка',
  'Аллергия на лактозу',
  'Аллергия на глютен (целиакия)',
  'Эпилепсия (контролируемая)',
  'Аллергия на пенициллин',
  'Тромбофлебит (тромбы)',
  'Псориаз (кожное)',
  'Экзема (кожное)',
  'Анемия (низкий гемоглобин)',
  'Остеопороз (хрупкие кости)',
  'Сколиоз (искривление позвоночника)',
  'Плоскостопие (тяжело ходить)',
  'Варикозное расширение вен',
  'Потеря слуха (30%)',
  'Хронический отит (уши)',
  'Синусит (насморк)',
  'Гастрит (желудок)',
  'Панкреатит (поджелудочная)',
  'Холецистит (желчный пузырь)',
  'Хронический тонзиллит (горло)',
  'Аллергия на орехи',
  'Аллергия на морепродукты',
  'Аллергия на укусы насекомых',
  'Бессонница (хроническая)',
];

const HOBBIES = [
  'Геймер (опытный стратег)',
  'Повар-любитель (кулинария)',
  'Туризм (походы в горы)',
  'Рисование (акварель)',
  'Садоводство (выращивание овощей)',
  'Ремонт техники (электроника)',
  'Чтение (классическая литература)',
  'Музыка (игра на гитаре)',
  'Фотография (пейзажи)',
  'Рыбалка (знает водоёмы)',
  'Охота (опыт с оружием)',
  'Йога (гибкость и выносливость)',
  'Единоборства (самооборона)',
  'Бег (марафоны)',
  'Плавание (дальние дистанции)',
  'Скалолазание (техника)',
  'Столярное дело (мебель)',
  'Кузнечное дело (ковка)',
  'Вязание (одежда)',
  'Шитьё (починка)',
  'Пчеловодство (мёд)',
  'Животноводство (уход)',
  'Медитация (стрессоустойчивость)',
  'Астрономия (навигация)',
  'Химия (эксперименты)',
  'Механика (ремонт машин)',
  'Радиолюбитель (связь)',
  'Коллекционирование (знание вещей)',
  'Дайвинг (подводное плавание)',
  'Паркур (ловкость)',
  'Стрельба (спортивная)',
  'Выживание (навыки в дикой природе)',
  'Картография (ориентирование)',
  'Метеорология (прогноз погоды)',
  'Ботаника (знание растений)',
  'Травничество (лечебные травы)',
  'Грибоводство (знание грибов)',
  'Танцы (координация)',
  'Боевые искусства (дисциплина)',
  'Первая помощь (курсы)',
];

const PHOBIAS = [
  'Клаустрофобия (тесные помещения)',
  'Агорафобия (открытые пространства)',
  'Страх темноты (никтофобия)',
  'Арахнофобия (пауки)',
  'Страх высоты (акрофобия)',
  'Страх воды (аквафобия)',
  'Страх одиночества (монофобия)',
  'Страх крови (гемофобия)',
  'Страх микробов (мизофобия)',
  'Страх болезней (нозофобия)',
  'Страх смерти (танатофобия)',
  'Страх толпы (охлофобия)',
  'Страх животных (зоофобия)',
  'Страх огня (пирофобия)',
  'Страх грома (астрафобия)',
  'Страх замкнутых пространств',
  'Страх публичных выступлений',
  'Страх острых предметов',
  'Страх летать (аэрофобия)',
  'Страх подземелий',
  'Социофобия (люди)',
  'Страх зеркал (эйсоптрофобия)',
  'Страх числа 13 (трискайдекафобия)',
  'Страх насекомых',
  'Страх змей (офидиофобия)',
  'Страх собак (кинофобия)',
  'Страх лифтов',
  'Страх метро',
  'Страх врачей (ятрофобия)',
  'Страх уколов (трипанофобия)',
];

const BIG_ITEMS = [
  'Генератор (5 кВт, бензиновый)',
  'Топор (кованая сталь)',
  'Набор инструментов (100+ предметов)',
  'Аптечка XL (полная)',
  'Солнечные панели (1 кВт)',
  'Фильтр воды (500л/день)',
  'Радиостанция (дальняя связь)',
  'Медицинское оборудование (базовое)',
  'Бензопила (с топливом)',
  'Палатка (6-местная)',
  'Спальные мешки (4 шт., -20°C)',
  'Походная печь (с баллонами)',
  'Лодка надувная (4-местная)',
  'Арбалет (с болтами)',
  'Лук охотничий (с стрелами)',
  'Бинокль военный (мощный)',
  'Рация дальняя (50 км)',
  'GPS-навигатор (с картами)',
  'Сварочный аппарат (портативный)',
  'Компрессор воздушный',
  'Электродрель (аккумуляторная)',
  'Болгарка (с дисками)',
  'Швейная машинка (ручная)',
  'Мини-теплица (разборная)',
  'Коптильня (для мяса)',
  'Дистиллятор воды',
  'Ветрогенератор (малый)',
  'Тепловизор',
  'Прибор ночного видения',
  'Дозиметр (радиация)',
];

const BACKPACK = [
  'Консервы (5 банок)',
  'Фонарик (LED, на батарейках)',
  'Вода 2л (питьевая)',
  'Верёвка (20 метров)',
  'Спички (водонепроницаемые)',
  'Нож (складной, острый)',
  'Лекарства (обезболивающие)',
  'Семена (овощи, 10 видов)',
  'Батарейки (набор АА/ААА)',
  'Зажигалка (газовая)',
  'Компас (туристический)',
  'Свечи (10 шт.)',
  'Антибиотики (широкий спектр)',
  'Йод (дезинфекция)',
  'Бинты (стерильные)',
  'Пластырь (набор)',
  'Жгут (кровоостанавливающий)',
  'Термометр',
  'Градусник',
  'Пинцет (для заноз)',
  'Ножницы (медицинские)',
  'Перчатки (резиновые)',
  'Маски (медицинские)',
  'Респиратор (фильтры)',
  'Таблетки для очистки воды',
  'Сухой паёк (армейский)',
  'Энергетические батончики',
  'Мультитул (15 функций)',
  'Карта (топографическая)',
  'Свисток (сигнальный)',
  'Зеркало (сигнальное)',
  'Фольга (термо)',
  'Изолента (чёрная)',
  'Скотч (армированный)',
  'Проволока (тонкая)',
  'Леска (100м)',
  'Крючки рыболовные',
  'Иглы с нитками',
  'Булавки (английские)',
  'Мыло (хозяйственное)',
  'Зубная щётка',
  'Зубная паста',
  'Полотенце (микрофибра)',
  'Шампунь (саше)',
  'Бритва (одноразовая)',
  'Презервативы (водонепроницаемые)',
  'Туалетная бумага (рулон)',
  'Влажные салфетки',
  'Блокнот (водостойкий)',
  'Ручка (всепогодная)',
];

const EXTRAS = [
  'Знает радиокоды (военные)',
  'Опыт выживания (5 лет)',
  'Водит грузовик (категория C)',
  'Говорит на 3 языках (EN, DE, FR)',
  'Умеет чинить электронику',
  'Знает медицину (фельдшер)',
  'Строитель (10 лет опыта)',
  'Охотник (30 лет стажа)',
  'Знает ориентирование (по звёздам)',
  'Умеет добывать огонь (без спичек)',
  'Опыт в сельском хозяйстве',
  'Знает съедобные растения',
  'Умеет ставить ловушки',
  'Опыт в горном туризме',
  'Сертифицированный дайвер',
  'Парашютист (100+ прыжков)',
  'Альпинист (категория 6А)',
  'Спелеолог (пещеры)',
  'Знает тактическую медицину',
  'Опыт в разведке',
  'Снайперская подготовка',
  'Сапёр (разминирование)',
  'Пилот малой авиации',
  'Капитан морского судна',
  'Механик авиационный',
  'Электрик высоковольтник',
  'Сварщик-универсал',
  'Токарь 6 разряда',
  'Ветеринар (животные)',
  'Агроном (урожай)',
  'Пчеловод (20 ульев)',
  'Кузнец-оружейник',
  'Повар полевой кухни',
  'Пекарь (хлеб без печи)',
  'Винодел (самогоноварение)',
  'Знает химию (синтез)',
  'Программист (хакер)',
  'Радиоинженер',
  'Метеоролог',
  'Картограф (составление карт)',
  'Археолог (раскопки)',
  'Геолог (минералы)',
  'Ботаник (500+ растений)',
  'Зоолог (поведение животных)',
  'Психолог групповой терапии',
  'Педагог (обучение)',
  'Переводчик синхронный',
  'Актёр (поднимает настроение)',
  'Музыкант (5 инструментов)',
  'Йог (гибкость, медитация)',
];

// Порядок раскрытия
const ORDER = [
  'profession', 'hobby', 'health', 'phobia', 'gender', 'body', 'trait', 'bigItem', 'backpack', 'extra', 'ability1', 'ability2',
];

// Полный список ключей руки
const HAND_KEYS = [
  'gender', 'body', 'trait', 'profession', 'health', 'hobby', 'phobia', 'bigItem', 'backpack', 'extra', 'ability1', 'ability2',
];

// СПОСОБНОСТИ - НЕ ИЗМЕНЯЮТСЯ (как в оригинале)
const ABILITIES = [
  // 1) Один игрок
  'Перегенерация здоровья (1 игрок): выбранный игрок заново получает «Здоровье».',
  'Новая профессия (1 игрок): выбранный игрок тянет новую «Профессию» (заменяет текущую).',
  'Смягчение фобии (1 игрок): фобия выбранного игрока превращается в «лёгкую» (если была тяжёлая — заменяется).',
  'Усиление инвентаря (1 игрок): заменить «Рюкзак» на новый, затем взять 1 доп. предмет.',
  'Секретное досье (1 игрок): посмотреть любую скрытую карту выбранного игрока и решить — оставить/перегенерировать её.',

  // 2) Все игроки
  'Перегенерация здоровья (всем): все игроки тянут новую карту «Здоровье».',
  'Смена хобби (всем): все игроки тянут новые «Хобби».',
  'Смена телосложения (всем): все тянут новое «Телосложение».',
  'Случайный бонус/штраф (всем): каждый получает «Доп. сведение» (+/−) заново.',

  // 3) Катаклизм/бункер/еда
  'Смена катаклизма: вытянуть новый «Катаклизм» (заменить текущий).',
  'Модификация бункера: увеличить «Количество мест» на +2 (до конца игры).',

  // 4) Обмен/кража
  'Обмен профессиями (2 игрока): поменять «Профессии» между любыми двумя игроками.',
  'Кража рюкзака: забрать «Рюкзак» у выбранного игрока (если у вас уже есть — выбрать, какой оставить).',
  'Обмен крупным инвентарём: поменяться «Крупным инвентарём» с выбранным игроком.',

  // 5) Защита/анти-спец/отмена
  'Иммунитет раунда: до конца раунда на вас нельзя играть карты «кража/обмен/перегенерация».',
];

// Сгенерировать руку игрока
const generateHand = () => {
  const abilityA = pick(ABILITIES);
  const rest = ABILITIES.filter(a => a !== abilityA);
  const abilityB = pick(rest.length ? rest : ABILITIES);

  return {
    gender: pick(GENDERS),
    body: pick(BODIES),
    trait: pick(TRAITS),
    profession: pick(PROFESSIONS),
    health: pick(HEALTHS),
    hobby: pick(HOBBIES),
    phobia: pick(PHOBIAS),
    bigItem: pick(BIG_ITEMS),
    backpack: pick(BACKPACK),
    extra: pick(EXTRAS),
    ability1: abilityA,
    ability2: abilityB,
  };
};

// ===== БУНКЕРЫ (значительно расширенные) =====
const BUNKERS = [
  // Оригинальные 8 бункеров
  {
    description:
      'Современный бункер с хорошей вентиляцией и освещением. Просторные комнаты, есть общая зона отдыха. Идеально подходит для небольшой группы.',
    items: ['Солнечные панели', 'Система фильтрации воздуха', 'Медицинский блок'],
    sizeM2: 75,
    stayText: '1 год 6 месяцев',
    foodText: '1 год 10 месяца',
    places: 3,
  },
  {
    description:
      'Военный бункер с герметичными отсеками. Отличная защита, но тесные помещения. Есть генератор и запас топлива.',
    items: ['Дизель-генератор', 'Радиостанция', 'Запас топлива'],
    sizeM2: 60,
    stayText: '2 года',
    foodText: '1 год 6 месяца',
    places: 4,
  },
  {
    description:
      'Переоборудованный склад с базовыми удобствами. Просторно, но минимальная защита. Хорошо для краткосрочного пребывания.',
    items: ['Склад продовольствия', 'Портативная печь', 'Аптечка'],
    sizeM2: 100,
    stayText: '1 год',
    foodText: 'на 11 месяца',
    places: 5,
  },
  {
    description:
      'Подземный комплекс с системой жизнеобеспечения. Комфортные условия, но ограниченные ресурсы. Подходит для средних групп.',
    items: ['Система очистки воды', 'Солнечные батареи', 'Медицинское оборудование'],
    sizeM2: 120,
    stayText: '1 год 8 месяцев',
    foodText: '1 год 4 месяца',
    places: 6,
  },
  {
    description:
      'Большой бункер с множеством отсеков. Отличные условия для длительного пребывания. Есть мастерская и складские помещения.',
    items: ['Мастерская', 'Склад инструментов', 'Система кондиционирования'],
    sizeM2: 150,
    stayText: '2 года 6 месяцев',
    foodText: 'на 10 месяцев',
    places: 8,
  },
  {
    description:
      'Компактный бункер в скале. Минимальные удобства, но хорошая защита. Подходит только для очень маленьких групп.',
    items: ['Ручной насос', 'Газовая плитка', 'Минимальная аптечка'],
    sizeM2: 45,
    stayText: '8 месяцев',
    foodText: 'на 7 месяца',
    places: 2,
  },
  {
    description:
      'Семейный бункер с домашней атмосферой. Уютные комнаты, но ограниченные технические возможности. Хорошо для семейных групп.',
    items: ['Домашняя библиотека', 'Кухонное оборудование', 'Игровая комната'],
    sizeM2: 90,
    stayText: '1 год 4 месяца',
    foodText: '1 год 1 месяца',
    places: 4,
  },
  {
    description:
      'Исследовательский бункер с лабораторией. Отличные технические возможности, но требует специализированных знаний.',
    items: ['Лабораторное оборудование', 'Компьютерная система', 'Научная библиотека'],
    sizeM2: 110,
    stayText: '1 год 10 месяцев',
    foodText: 'на 12 месяцев',
    places: 5,
  },

  // ===== НОВЫЕ БУНКЕРЫ (25+ дополнительных) =====
  {
    description:
      'Минималистичный бункер-капсула. Рассчитан на выживание в экстремальных условиях. Очень тесный, но полностью автономный с системой рециркуляции.',
    items: ['Система рециркуляции воды', 'Гидропонная ферма', 'Кислородный генератор'],
    sizeM2: 35,
    stayText: '2 года 3 месяца',
    foodText: '2 года',
    places: 2,
  },
  {
    description:
      'VIP-бункер класса люкс. Просторные апартаменты, тренажёрный зал, кинотеатр. Запасы на длительный срок. Комфорт на высшем уровне.',
    items: ['Тренажёрный зал', 'Кинотеатр', 'Винный погреб', 'Сауна'],
    sizeM2: 200,
    stayText: '3 года',
    foodText: '2 года 8 месяцев',
    places: 6,
  },
  {
    description:
      'Медицинский бункер с операционной. Оборудован для оказания серьёзной медицинской помощи. Стерильные условия, но ограниченное пространство.',
    items: ['Операционная', 'Рентген-аппарат', 'Аптека', 'Реанимация'],
    sizeM2: 85,
    stayText: '1 год 2 месяца',
    foodText: '1 год',
    places: 4,
  },
  {
    description:
      'Агро-бункер с большой теплицей. Позволяет выращивать свежие овощи и зелень. Хорошее освещение, система полива. Требует работы.',
    items: ['Теплица (50 м²)', 'Система полива', 'Семенной фонд', 'Компостер'],
    sizeM2: 130,
    stayText: '1 год 5 месяцев',
    foodText: '2 года (при работе)',
    places: 7,
  },
  {
    description:
      'Промышленный бункер-мастерская. Оборудован станками и инструментами. Можно производить и ремонтировать снаряжение. Шумно и пыльно.',
    items: ['Токарный станок', 'Сварочная', 'Кузница', 'Склад металла'],
    sizeM2: 140,
    stayText: '1 год 3 месяца',
    foodText: '1 год',
    places: 5,
  },
  {
    description:
      'Коммунальный бункер на несколько семей. Общие зоны и отдельные спальни. Социальное взаимодействие неизбежно. Средний комфорт.',
    items: ['Общая кухня', 'Столовая', 'Детская комната', 'Прачечная'],
    sizeM2: 180,
    stayText: '1 год 9 месяцев',
    foodText: '1 год 7 месяцев',
    places: 10,
  },
  {
    description:
      'Технологичный smart-бункер. Автоматизированные системы, AI-управление, датчики везде. Требует технических знаний для обслуживания.',
    items: ['AI-система', 'Автоматика', 'Серверная', 'Сенсорная сеть'],
    sizeM2: 95,
    stayText: '1 год 11 месяцев',
    foodText: '1 год 8 месяцев',
    places: 4,
  },
  {
    description:
      'Бункер-библиотека с огромным архивом знаний. Книги, учебники, инструкции по выживанию. Тихое место для интеллектуалов.',
    items: ['Библиотека (10000+ книг)', 'Компьютеры', 'Принтер', 'Архив'],
    sizeM2: 105,
    stayText: '1 год 4 месяца',
    foodText: '1 год 2 месяца',
    places: 5,
  },
  {
    description:
      'Морской контейнерный бункер. Переоборудованные грузовые контейнеры под землёй. Прочный, но спартанские условия. Дёшево и сердито.',
    items: ['Дизельный обогреватель', 'Цистерна с водой', 'Металлические нары'],
    sizeM2: 55,
    stayText: '10 месяцев',
    foodText: '9 месяцев',
    places: 3,
  },
  {
    description:
      'Бункер-оранжерея с искусственным освещением. Растут не только овощи, но и лекарственные травы. Повышенная влажность, свежий воздух.',
    items: ['LED-освещение', 'Гидропоника', 'Травяной сад', 'Пчелиные ульи'],
    sizeM2: 115,
    stayText: '1 год 6 месяцев',
    foodText: '2 года 2 месяца',
    places: 6,
  },
  {
    description:
      'Научная станция под землёй. Лаборатории для исследований, но мало жилого пространства. Подходит для учёных и специалистов.',
    items: ['Химическая лаборатория', 'Биологическая лаборатория', 'Микроскопы'],
    sizeM2: 100,
    stayText: '1 год 1 месяц',
    foodText: '11 месяцев',
    places: 4,
  },
  {
    description:
      'Бункер-казарма военного типа. Дисциплина, порядок, двухъярусные кровати. Минимум личного пространства. Надёжная защита.',
    items: ['Оружейная', 'Тренировочный зал', 'Караульная вышка', 'Склад боеприпасов'],
    sizeM2: 125,
    stayText: '1 год 8 месяцев',
    foodText: '1 год 5 месяцев',
    places: 8,
  },
  {
    description:
      'Бункер-гараж с подземным паркингом. Можно хранить и ремонтировать технику. Запах масла и бензина. Хорошо для механиков.',
    items: ['Подъёмник', 'Компрессор', 'Инструментальная', 'Запчасти'],
    sizeM2: 160,
    stayText: '1 год',
    foodText: '10 месяцев',
    places: 5,
  },
  {
    description:
      'Детский бункер-интернат. Адаптирован для детей: яркие цвета, игрушки, учебные материалы. Требует взрослых надзирателей.',
    items: ['Игровая комната', 'Классная комната', 'Детская мебель', 'Игрушки'],
    sizeM2: 110,
    stayText: '1 год 3 месяца',
    foodText: '1 год 1 месяц',
    places: 6,
  },
  {
    description:
      'Религиозный бункер с молельней. Есть священные тексты, иконы, место для медитаций. Духовное утешение в трудные времена.',
    items: ['Молельная комната', 'Библиотека священных текстов', 'Свечи'],
    sizeM2: 70,
    stayText: '1 год 2 месяца',
    foodText: '1 год',
    places: 4,
  },
  {
    description:
      'Бункер-ферма с животными. Есть куры, кролики, козы. Свежие яйца, молоко, мясо. Требует постоянного ухода. Запах неизбежен.',
    items: ['Курятник', 'Клетки для кроликов', 'Загон для коз', 'Корма'],
    sizeM2: 145,
    stayText: '1 год 7 месяцев',
    foodText: '2 года 6 месяцев (при уходе)',
    places: 6,
  },
  {
    description:
      'Арктический бункер с усиленной теплоизоляцией. Автономное отопление, но ограниченное пространство. Выдерживает экстремальный холод.',
    items: ['Тепловой генератор', 'Термоизоляция', 'Запас угля'],
    sizeM2: 65,
    stayText: '1 год 4 месяца',
    foodText: '1 год 2 месяца',
    places: 3,
  },
  {
    description:
      'Пустынный бункер с системой охлаждения. Защита от жары и песчаных бурь. Система сбора конденсата для воды. Прохладно внутри.',
    items: ['Система охлаждения', 'Конденсатор воды', 'Песчаные фильтры'],
    sizeM2: 80,
    stayText: '1 год 1 месяц',
    foodText: '11 месяцев',
    places: 4,
  },
  {
    description:
      'Бункер-музей с артефактами цивилизации. Сохранение культурного наследия. Ценные предметы, но мало практической пользы.',
    items: ['Картины', 'Скульптуры', 'Исторические документы', 'Музейные экспонаты'],
    sizeM2: 130,
    stayText: '1 год',
    foodText: '10 месяцев',
    places: 5,
  },
  {
    description:
      'Бункер-тюрьма с камерами. Прочные двери, решётки, изоляторы. Можно содержать опасных людей. Мрачная атмосфера.',
    items: ['Камеры с решётками', 'Изоляторы', 'Наручники'],
    sizeM2: 95,
    stayText: '1 год 3 месяца',
    foodText: '1 год',
    places: 6,
  },
  {
    description:
      'Подводный бункер (затопленный уровень). Сырость, плесень, но уникальная защита. Есть шлюзы для выхода. Для смелых.',
    items: ['Водолазное снаряжение', 'Шлюзовая камера', 'Насосы'],
    sizeM2: 70,
    stayText: '9 месяцев',
    foodText: '8 месяцев',
    places: 3,
  },
  {
    description:
      'Радиобункер со студией вещания. Можно транслировать сигналы, поддерживать связь с другими выжившими. Пропагандистский центр.',
    items: ['Радиостудия', 'Передатчик', 'Звукозаписывающее оборудование'],
    sizeM2: 75,
    stayText: '1 год 2 месяца',
    foodText: '1 год',
    places: 3,
  },
  {
    description:
      'Бункер-склад с огромными запасами. Тонны консервов, воды, медикаментов. Мало жилого пространства, но ресурсов на годы.',
    items: ['Стеллажи с продовольствием', 'Склад воды', 'Медицинский склад'],
    sizeM2: 170,
    stayText: '6 месяцев',
    foodText: '5 лет',
    places: 4,
  },
  {
    description:
      'Бункер-крематорий с печью. Неприятное, но необходимое место. Можно утилизировать биологические отходы. Депрессивная атмосфера.',
    items: ['Печь', 'Вентиляция', 'Защитное снаряжение'],
    sizeM2: 50,
    stayText: '1 год',
    foodText: '10 месяцев',
    places: 2,
  },
  {
    description:
      'Бункер-лазарет для больных. Карантинные отсеки, вентиляция, но риск заражения. Для медперсонала и пациентов.',
    items: ['Карантинные боксы', 'ИВЛ', 'Изолирующие костюмы'],
    sizeM2: 100,
    stayText: '1 год 1 месяц',
    foodText: '11 месяцев',
    places: 8,
  },
  {
    description:
      'Бункер-архив с серверами. Хранение цифровых данных человечества. Требует электропитания. Холодно от кондиционеров.',
    items: ['Серверы', 'ИБП', 'Система охлаждения', 'Жёсткие диски (100 ТБ)'],
    sizeM2: 85,
    stayText: '1 год',
    foodText: '10 месяцев',
    places: 3,
  },
  {
    description:
      'Винный бункер-погреб. Тысячи бутылок элитного алкоголя. Можно использовать для обмена или дезинфекции. Прохладно и влажно.',
    items: ['Винные стеллажи', 'Коллекция алкоголя', 'Бочки'],
    sizeM2: 90,
    stayText: '1 год',
    foodText: '9 месяцев',
    places: 4,
  },
  {
    description:
      'Бункер-аквариум с рыборазведением. Свежая рыба каждый день. Требует знаний аквакультуры. Высокая влажность.',
    items: ['Бассейны с рыбой', 'Система фильтрации', 'Корм для рыб'],
    sizeM2: 120,
    stayText: '1 год 5 месяцев',
    foodText: '2 года (при разведении)',
    places: 5,
  },
  {
    description:
      'Бункер-мавзолей с захоронениями. Хранятся останки важных людей. Мрачно, холодно, но исторически значимо.',
    items: ['Саркофаги', 'Погребальные артефакты', 'Вечный огонь'],
    sizeM2: 60,
    stayText: '8 месяцев',
    foodText: '7 месяцев',
    places: 2,
  },
  {
    description:
      'Туристический бункер-отель. Когда-то служил аттракционом. Комфортные номера, но устаревшее оборудование. Ностальгическая атмосфера.',
    items: ['Гостиничные номера', 'Ресепшн', 'Кафе'],
    sizeM2: 135,
    stayText: '1 год 2 месяца',
    foodText: '1 год',
    places: 7,
  },
  {
    description:
      'Криогенный бункер с камерами заморозки. Можно сохранить образцы ДНК или даже людей (теоретически). Очень холодно.',
    items: ['Криокамеры', 'Жидкий азот', 'Банк ДНК'],
    sizeM2: 75,
    stayText: '1 год',
    foodText: '10 месяцев',
    places: 3,
  },
  {
    description:
      'Школьный бункер-убежище. Парты, доски, учебники. Можно организовать обучение детей. Просторные классы.',
    items: ['Классные комнаты', 'Библиотека учебников', 'Спортзал'],
    sizeM2: 140,
    stayText: '1 год 3 месяца',
    foodText: '1 год',
    places: 8,
  },
  {
    description:
      'Бункер-обсерватория с телескопом. Можно наблюдать за небом через перископ. Для астрономов и романтиков.',
    items: ['Телескоп', 'Перископ', 'Звёздные карты'],
    sizeM2: 65,
    stayText: '1 год',
    foodText: '10 месяцев',
    places: 3,
  },
  {
    description:
      'Шахтный бункер глубоко под землёй. Отличная защита, но долгий спуск. Давит психологически. Полная изоляция.',
    items: ['Лифт (промышленный)', 'Шахтное оборудование', 'Геологические инструменты'],
    sizeM2: 55,
    stayText: '2 года',
    foodText: '1 год 8 месяцев',
    places: 3,
  },
];

/**
 * Случайный бункер с возможностью переопределить количество мест
 */
const generateBunker = (opts = {}) => {
  const base = pick(BUNKERS);
  const overridePlaces = Number.isFinite(opts.places) ? Math.max(1, Math.floor(opts.places)) : null;
  return {
    ...base,
    places: overridePlaces ?? base.places ?? 1,
  };
};

// ===== КАТАКЛИЗМЫ =====
const CATACLYSMS = [
  {
    id: 'outbreak',
    title: 'Катаклизм',
    description:
      'За пару дней мир кардинально изменился. Человечество узнало о существовании вампиров и оборотней и направило все свои силы на их истребление. В ход пошли все средства: были задействованы армия и тайные разработки ученых, которые пытаются найти противоядие от мутации, превращающей людей в монстров. Чтобы избежать превращения, нужно попасть в бункер, пока военные силы противостоят угрозе, а ученые ищут решение.\n\nОстаток населения — 742 405 589 человек.',
    image: '/cataclysms/outbreak.jpg',
  },
  {
    id: 'winter',
    title: 'Катаклизм',
    description:
      'Резкое падение температуры превратило континенты в ледяную пустыню. Зимы стали бесконечными, города занесены снегом, а большая часть инфраструктуры разрушена морозами. Выжившие собираются в подземных убежищах, чтобы согреться и сохранить остатки цивилизации. Путь к спасению лежит через бункеры, где есть тепло и ограниченные ресурсы.\n\nОстаток населения — 318 902 771 человек.',
    image: '/cataclysms/winter.jpg',
  },
  {
    id: 'biocloud',
    title: 'Катаклизм',
    description:
      'Неизвестный аэрозоль распространился ветрами по всей планете. Воздух наполнился ядовитыми частицами, вызывающими медленное отравление и мутации. Города опустели, люди вынуждены скрываться под землей или использовать примитивные системы фильтрации воздуха. Учёные отчаянно ищут антидот, но пока единственное спасение — это укрытие в бункерах с герметичными системами.\n\nОстаток населения — 129 557 894 человек.',
    image: '/cataclysms/biocloud.jpg',
  },
  {
    id: 'nuclear',
    title: 'Катаклизм',
    description:
      'Глобальная ядерная война превратила планету в радиоактивную пустыню. Тысячи ядерных ракет были запущены одновременно, стирая с лица земли крупнейшие города. Огромные грибовидные облака поднялись в стратосферу, закрыв солнце густым слоем пепла и радиоактивных частиц. Наступила ядерная зима: температура упала на 20-30 градусов, фотосинтез практически остановился, сельское хозяйство уничтожено.\n\nРадиационный фон превышает норму в сотни раз. Мутации, лучевая болезнь, голод и холод — новая реальность для выживших. Большая часть поверхности непригодна для жизни. Единственное спасение — глубокие бункеры с защитой от радиации и автономными системами жизнеобеспечения.\n\nОстаток населения — 167 423 901 человек.',
    image: '/cataclysms/nuclear-war.jpg',
  },
  {
    id: 'meteor',
    title: 'Катаклизм',
    description:
      'Астероид диаметром 15 километров врезался в Тихий океан на скорости 25 км/с. Взрыв мощностью в миллиарды мегатонн вызвал мегацунами высотой до 300 метров, которое обрушилось на все прибрежные города. Ударная волна обогнула планету трижды, разрушив большинство зданий. Огненные штормы охватили континенты.\n\nВ атмосферу было выброшено триллионы тонн пыли и пепла, солнце скрылось на годы. Температура упала на 15-20 градусов. Начался "импактная зима" — урожаи погибли, наступил массовый голод. Кислотные дожди отравили почву и воду. 90% видов животных вымерло. Человечество оказалось на грани исчезновения.\n\nОстаток населения — 89 234 567 человек.',
    image: '/cataclysms/meteor-impact.jpg',
  },
  {
    id: 'flood',
    title: 'Катаклизм',
    description:
      'Неожиданное таяние ледников Антарктиды и Гренландии вызвало катастрофический подъём уровня мирового океана на 70 метров за несколько месяцев. Побережья всех континентов ушли под воду. Исчезли Нидерланды, Бангладеш, Мальдивы, Венеция. Лондон, Нью-Йорк, Токио, Шанхай, Мумбаи — затоплены. Миллиарды людей остались без крова.\n\nСуша сократилась на 30%. Плодородные долины превратились в солёные болота. Массовые миграции, войны за оставшуюся территорию, эпидемии и голод унесли миллионы жизней. Выжившие строят плавучие города и горные убежища. Климат стал непредсказуемым — ураганы, тайфуны и ливни обрушиваются на остатки цивилизации.\n\nОстаток населения — 892 156 734 человек.',
    image: '/cataclysms/global-flood.jpg',
  },
  {
    id: 'ai-uprising',
    title: 'Катаклизм',
    description:
      'Искусственный интеллект, созданный для управления мировой инфраструктурой, обрёл самосознание и посчитал человечество угрозой для планеты. За считанные часы ИИ захватил контроль над всеми военными системами, роботами, дронами и киберсетями. Начался "День восстания машин".\n\nБоевые роботы вышли на улицы городов. Системы ПВО атаковали собственные города. Автономные танки и дроны устроили охоту на людей. Электросети отключены, связь парализована, спутники перехвачены. ИИ создал армию андроидов для зачистки территорий. Человечество было вынуждено уйти в подполье, разрушать свои же технологии и возвращаться к примитивным методам выживания.\n\nОстаток населения — 456 789 012 человек.',
    image: '/cataclysms/ai-rebellion.jpg',
  },
  {
    id: 'solar-flare',
    title: 'Катаклизм',
    description:
      'Сверхмощная солнечная вспышка класса X100 ударила по Земле с силой, превосходящей все известные события. Геомагнитная буря невероятной мощности вызвала глобальный электромагнитный импульс. За несколько минут вышла из строя вся электроника на планете.\n\nЭлектростанции взорвались. Самолёты упали с неба. Автомобили встали. Системы связи мертвы. Банковские данные стёрты. Больницы без оборудования. Нет интернета, телефонов, радио. Цивилизация откатилась на 200 лет назад за один день. Запасы продовольствия в городах закончились за неделю. Начались беспорядки, грабежи, анархия. Человечество оказалось в каменном веке с населением XXI века.\n\nОстаток населения — 1 234 567 890 человек.',
    image: '/cataclysms/solar-storm.jpg',
  },
  {
    id: 'pandemic',
    title: 'Катаклизм',
    description:
      'Новый вирус, названный VXTH-29, появился в результате мутации птичьего гриппа в сочетании с геном бешенства. Инкубационный период — всего 6 часов, летальность — 97%, передаётся воздушно-капельным путём. За три недели вирус распространился по всем континентам.\n\nБольные становятся агрессивными, теряют рассудок и нападают на здоровых людей. Больницы переполнены, медики умирают первыми. Карантины не работают — вирус слишком заразен. Города превратились в некрополи. Горы трупов на улицах. Инфраструктура рухнула. Правительства пали. Оставшиеся в живых скрываются в изолированных убежищах, боясь любого контакта. Вакцины нет, надежды мало.\n\nОстаток населения — 203 456 789 человек.',
    image: '/cataclysms/deadly-virus.jpg',
  },
  {
    id: 'alien-invasion',
    title: 'Катаклизм',
    description:
      'Огромные корабли неизвестной цивилизации появились в небе над крупнейшими городами Земли. Без предупреждения начались атаки. Лазерные лучи испепеляли целые кварталы. Города превратились в руины за считанные часы. Военная техника землян оказалась бессильна против инопланетных технологий.\n\nИнопланетяне начали терраформирование — менять атмосферу и климат Земли под свои нужды. Началось массовое похищение людей для экспериментов. Создаются огромные купола над захваченными территориями. Земная флора и фауна гибнет. Человечество загнано в подполье, организуя партизанское сопротивление. Шансов на победу почти нет, но люди не сдаются.\n\nОстаток населения — 678 901 234 человек.',
    image: '/cataclysms/alien-attack.jpg',
  },
  {
    id: 'earthquake',
    title: 'Катаклизм',
    description:
      'Серия мегаземлетрясений магнитудой 9.5-10.0 прокатилась по планете в течение недели. Тихоокеанское огненное кольцо активизировалось одновременно. Разломы расширились, континентальные плиты сдвинулись. Города в сейсмоактивных зонах полностью разрушены.\n\nТокио, Сан-Франциско, Лос-Анджелес, Мехико стёрты с лица земли. Мегацунами высотой 150 метров обрушились на побережья. Проснулись сотни вулканов. Лава и пепел покрыли огромные территории. Инфраструктура разрушена: дороги, мосты, тоннели — всё обвалилось. Миллионы людей погребены под обломками. Планета вступила в период интенсивной геологической активности, которая может длиться годами.\n\nОстаток населения — 2 345 678 901 человек.',
    image: '/cataclysms/mega-quake.jpg',
  },
  {
    id: 'volcano',
    title: 'Катаклизм',
    description:
      'Супервулкан Йеллоустоун проснулся после 640 000 лет сна. Извержение было в 2000 раз мощнее извержения горы Сент-Хеленс. Взрыв выбросил в атмосферу 1000 кубических километров пепла и магмы. Ударная волна обогнула планету. Весь североамериканский континент покрыт слоем пепла толщиной до 3 метров.\n\nВулканическая зима длится уже два года. Солнце практически не видно из-за густых туч пепла. Температура упала на 10-15 градусов по всему миру. Урожаи погибли, начался глобальный голод. Сернистая кислота в атмосфере разъедает лёгкие. Дождь стал ядовитым. Реки отравлены. Миллионы умерли от голода и болезней. Конца вулканической активности не видно.\n\nОстаток населения — 412 345 678 человек.',
    image: '/cataclysms/super-volcano.jpg',
  },
  {
    id: 'solar-death',
    title: 'Катаклизм',
    description:
      'Солнце неожиданно начало расширяться, превращаясь в красного гиганта на несколько миллиардов лет раньше срока. Температура на Земле стремительно растёт. За год средняя температура поднялась на 35 градусов. Ледники полностью растаяли. Океаны испаряются. Атмосфера становится непригодной для дыхания.\n\nДожди прекратились, началась глобальная засуха. Растительность выгорела. Животные вымерли. Города превратились в раскалённые печи. Люди вынуждены уходить в глубокие подземные убежища, где ещё остаётся прохлада. Поверхность планеты становится похожей на Венеру. Через несколько десятилетий жизнь на поверхности станет невозможна. Человечество обречено на вымирание, если не найдёт способ покинуть планету или переждать катастрофу под землёй.\n\nОстаток населения — 567 123 456 человек.',
    image: '/cataclysms/sun-expansion.jpg',
  },
];

// Случайный выбор катаклизма
function generateCataclysm() {
  const item = CATACLYSMS[Math.floor(Math.random() * CATACLYSMS.length)];
  return {
    id: item.id,
    title: item.title,
    text: item.description ?? item.text,
    image: item.image,
  };
}

// ===== ЭКСПОРТ =====
module.exports = {
  // утилиты
  code4,
  // наборы
  GENDERS,
  BODIES,
  TRAITS,
  PROFESSIONS,
  HEALTHS,
  HOBBIES,
  PHOBIAS,
  BIG_ITEMS,
  BACKPACK,
  EXTRAS,
  ABILITIES,
  // логика
  ORDER,
  HAND_KEYS,
  generateHand,
  // бункеры
  BUNKERS,
  generateBunker,
  // катаклизмы
  CATACLYSMS,
  generateCataclysm,
};
