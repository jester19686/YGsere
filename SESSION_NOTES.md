# üìù –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ "–ë—É–Ω–∫–µ—Ä"

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 04.10.2025 21:00 MSK

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ (04.10.2025)

### 1. –î–µ–ø–ª–æ–π –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä
- **–°–µ—Ä–≤–µ—Ä:** root@5652617-oy29376.tmweb.ru (IP: 147.45.185.152)
- **–î–æ–º–µ–Ω:** bunker-zone.ru
- **Backend:** –ó–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 4000 —á–µ—Ä–µ–∑ PM2 (–ø—Ä–æ—Ü–µ—Å—Å: bunker-backend)
- **Frontend:** –ó–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000 —á–µ—Ä–µ–∑ PM2 (–ø—Ä–æ—Ü–µ—Å—Å: bunker-frontend)
- **SSL:** –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è –¥–æ–º–µ–Ω–∞
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫:** PM2 –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ VPS:
```
/srv/bunker/
‚îú‚îÄ‚îÄ .env (backend config)
‚îÇ   PORT=4000
‚îÇ   NODE_ENV=production
‚îÇ   FRONT_ORIGIN=https://bunker-zone.ru
‚îÇ   TELEGRAM_BOT_TOKEN=
‚îÇ
‚îî‚îÄ‚îÄ client/.env.production (frontend config)
    NEXT_PUBLIC_API_URL=https://bunker-zone.ru
    NEXT_PUBLIC_WS_URL=wss://bunker-zone.ru
    NEXT_PUBLIC_TG_BOT_USERNAME=BunkerAuthbot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–ë–æ—Ç:** @BunkerAuthbot
- **–î–æ–º–µ–Ω –ø—Ä–∏–≤—è–∑–∞–Ω:** bunker-zone.ru —á–µ—Ä–µ–∑ @BotFather (/setdomain)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –£–±—Ä–∞–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ –∏–∑ AuthModal.tsx
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å React setState
  - –í–∏–¥–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏
  - –í—Å–µ ESLint –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –í–º–µ—Å—Ç–æ 3 —Ö–æ–¥–æ–≤ –±—ã–ª —Ç–æ–ª—å–∫–æ 1 —Ö–æ–¥
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤:** `game/rounds.js`
- –†–∞—É–Ω–¥ 1: quota = 3 (–±—ã–ª–æ 1)
- –†–∞—É–Ω–¥ 2: quota = 2
- –†–∞—É–Ω–¥ 3+: quota = 1

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ –±—ã–ª–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤:** `game/rounds.js`, `game/vote.js`, `index.js`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `advanceRound(room)`
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞—É–Ω–¥—É
- –ö–≤–æ—Ç–∞ –º–µ–Ω—è–µ—Ç—Å—è: 3 ‚Üí 2 ‚Üí 1

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—à–∏–±–∫–∞ clearTurnTimer is not defined
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤:** `index.js`
- –ó–∞–º–µ–Ω–µ–Ω–æ `clearTurnTimer()` –Ω–∞ `timers.clearTurnTimer()`

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ –Ω–∞ –≤–∏–¥–∂–µ—Ç Telegram –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ, –º–æ–¥–∞–ª–∫–∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–∞—Å—å

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å React setState (–¥–æ–±–∞–≤–ª–µ–Ω setTimeout 50ms –ø–µ—Ä–µ–¥ onConfirm)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ ESLint –æ—à–∏–±–∫–∏ –¥–ª—è production build
- UX —É–ª—É—á—à–µ–Ω–∏–µ: –≤–∏–¥–∂–µ—Ç —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏

### 5. –ö–æ–º–º–∏—Ç—ã –≤ GitHub (–ø–æ—Å–ª–µ–¥–Ω–∏–µ)
```
1702223 - feat: auto-load Telegram widget on modal open, remove manual button
794af3a - fix: add timeout before onConfirm to wait for nick state update
360417b - debug: add more detailed logging for Telegram widget initialization
09dff50 - fix: resolve ESLint errors for production build
6a1676e - fix: implement proper round progression (3-2-1 moves) and game flow
9c895f0 - fix: resolve clearTurnTimer undefined error in checkGameOver
d9f506c - fix: remove Telegram auth stub, enable real Telegram Login Widget
```

---

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–≥—Ä–∞ —Å–µ–π—á–∞—Å

### –ú–µ—Ö–∞–Ω–∏–∫–∞ —Ä–∞—É–Ω–¥–æ–≤:
1. **–†–∞—É–Ω–¥ 1:** –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç 3 —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ ‚Üí –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ ‚Üí –ò—Å–∫–ª—é—á–∞—é—Ç 1 –∏–≥—Ä–æ–∫–∞
2. **–†–∞—É–Ω–¥ 2:** –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç 2 —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ ‚Üí –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ ‚Üí –ò—Å–∫–ª—é—á–∞—é—Ç 1 –∏–≥—Ä–æ–∫–∞
3. **–†–∞—É–Ω–¥ 3+:** –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç 1 —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É ‚Üí –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ ‚Üí –ò—Å–∫–ª—é—á–∞—é—Ç 1 –∏–≥—Ä–æ–∫–∞
4. –†–∞—É–Ω–¥—ã –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –ø–æ–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ —Å—Ç–∞–Ω–µ—Ç ‚â§ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–µ—Å—Ç –≤ –±—É–Ω–∫–µ—Ä–µ

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç –≤ –±—É–Ω–∫–µ—Ä–µ:
- **2 –∏–≥—Ä–æ–∫–∞** ‚Üí **1 –º–µ—Å—Ç–æ** (–æ—Å—Ç–∞—ë—Ç—Å—è 1 –ø–æ–±–µ–¥–∏—Ç–µ–ª—å)
- **3-5 –∏–≥—Ä–æ–∫–æ–≤** ‚Üí **2 –º–µ—Å—Ç–∞** (–æ—Å—Ç–∞—é—Ç—Å—è 2 –ø–æ–±–µ–¥–∏—Ç–µ–ª—è)
- **6+ –∏–≥—Ä–æ–∫–æ–≤** ‚Üí **–ø–æ–ª–æ–≤–∏–Ω–∞** –∏–≥—Ä–æ–∫–æ–≤

### –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –∏–≥—Ä–æ–∫–æ–≤ ‚â§ –º–µ—Å—Ç –≤ –±—É–Ω–∫–µ—Ä–µ
- –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏
- –ö–æ–º–Ω–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç

---

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (04.10.2025 21:00)

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ VPS (–ø–æ—Ä—Ç 4000)
- ‚úÖ Frontend –∑–∞–ø—É—â–µ–Ω –Ω–∞ VPS (–ø–æ—Ä—Ç 3000)
- ‚úÖ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—É–Ω–¥–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (3-2-1 —Ö–æ–¥–æ–≤)
- ‚úÖ PM2 –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
- ‚è≥ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ production (–ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–±–æ—Ä–∫–∏)
- ‚è≥ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∏–≥—Ä—ã –Ω–∞ 2 –∏–≥—Ä–æ–∫–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞—É–Ω–¥–∞–º–∏
- ‚è≥ –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã –∏ –∞–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–º–Ω–∞—Ç—ã —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è VPS

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```bash
ssh root@5652617-oy29376.tmweb.ru
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PM2:
```bash
pm2 status                      # –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 logs bunker-backend         # –õ–æ–≥–∏ backend
pm2 logs bunker-frontend        # –õ–æ–≥–∏ frontend
pm2 restart bunker-backend      # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend
pm2 restart bunker-frontend     # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ frontend
pm2 restart all                 # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å GitHub:
```bash
cd /srv/bunker
git pull origin main            # –°–∫–∞—á–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

# –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è backend:
pm2 restart bunker-backend

# –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è frontend:
cd client
npm run build                   # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å (1-2 –º–∏–Ω—É—Ç—ã)
cd ..
pm2 restart bunker-frontend
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (—Å–∫—Ä–∏–ø—Ç):
```bash
cd /srv/bunker
./deploy.sh all                 # Backend + Frontend
./deploy.sh front               # –¢–æ–ª—å–∫–æ Frontend
./deploy.sh back                # –¢–æ–ª—å–∫–æ Backend
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ VPS (–°–†–û–ß–ù–û!)
```bash
cd /srv/bunker
git pull origin main
cd client
npm run build  # –ó–∞–π–º—ë—Ç 1-2 –º–∏–Ω—É—Ç—ã
cd ..
pm2 restart bunker-frontend
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –û—Ç–∫—Ä—ã—Ç—å https://bunker-zone.ru —Å **Ctrl+Shift+R** (–∂—ë—Å—Ç–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- –í–∏–¥–∂–µ—Ç Telegram –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏
- –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏ –∫–∞–∫ [–≤–∞—à username]"
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ –Ω–∏–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∞–≤–∞—Ç–∞—Ä –∏–∑ Telegram –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä–æ–≤—É—é –º–µ—Ö–∞–Ω–∏–∫—É (–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª)
–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É –Ω–∞ **2 –∏–≥—Ä–æ–∫–æ–≤** –∏ –ø—Ä–æ–π—Ç–∏ –∏–≥—Ä—É –ø–æ–ª–Ω–æ—Å—Ç—å—é:

**–†–∞—É–Ω–¥ 1:**
- –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç **3 —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**
- –ü–æ—Å–ª–µ –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç–∏–π ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (—Å–ø–∏—á–∏ 60 —Å–µ–∫, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ 90 —Å–µ–∫)
- –ò—Å–∫–ª—é—á–∞—é—Ç 1 –∏–≥—Ä–æ–∫–∞ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –†–∞—É–Ω–¥—É 2

**–†–∞—É–Ω–¥ 2:**
- –û—Å—Ç–∞–≤—à–∏–π—Å—è –∏–≥—Ä–æ–∫ –ø–æ–±–µ–∂–¥–∞–µ—Ç (—Ç.–∫. 2 –∏–≥—Ä–æ–∫–∞ = 1 –º–µ—Å—Ç–æ –≤ –±—É–Ω–∫–µ—Ä–µ)
- –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è **—ç–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã** —Å –∏–º–µ–Ω–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
- –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è **—Ç–∞–π–º–µ—Ä –∞–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏—è** –∫–æ–º–Ω–∞—Ç—ã (5 –º–∏–Ω—É—Ç)

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –†–∞—É–Ω–¥—ã –º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (3‚Üí2‚Üí1 —Ö–æ–¥–æ–≤)
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ –¢–∞–π–º–µ—Ä –∑–∞–∫—Ä—ã—Ç–∏—è –∫–æ–º–Ω–∞—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç

### 4. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `pm2 logs --lines 50`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: `pm2 status`

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/srv/bunker/
‚îú‚îÄ‚îÄ index.js                    # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª backend (Express + Socket.IO)
‚îú‚îÄ‚îÄ .env                        # Backend –∫–æ–Ω—Ñ–∏–≥ (production)
‚îú‚îÄ‚îÄ package.json                # Backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ game/                       # –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ rounds.js              # ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞—É–Ω–¥–æ–≤ (3-2-1 —Ö–æ–¥–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ vote.js                # ‚úÖ –õ–æ–≥–∏–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ timers.js              # –¢–∞–π–º–µ—Ä—ã
‚îÇ
‚îú‚îÄ‚îÄ routes/                     # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth.js                # Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ rooms.js               # –°–æ–∑–¥–∞–Ω–∏–µ/—Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
‚îÇ
‚îú‚îÄ‚îÄ sockets/                    # Socket.IO –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ game.js                # –ò–≥—Ä–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è
‚îÇ
‚îú‚îÄ‚îÄ data/                       # –ò–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ cards.js               # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç, –±—É–Ω–∫–µ—Ä–∞, –∫–∞—Ç–∞–∫–ª–∏–∑–º–∞
‚îÇ
‚îî‚îÄ‚îÄ client/                     # Next.js Frontend
    ‚îú‚îÄ‚îÄ .env.production        # Frontend –∫–æ–Ω—Ñ–∏–≥ (production)
    ‚îú‚îÄ‚îÄ package.json           # Frontend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îÇ
    ‚îî‚îÄ‚îÄ src/
        ‚îú‚îÄ‚îÄ app/
        ‚îÇ   ‚îú‚îÄ‚îÄ game/[roomId]/ # –ò–≥—Ä–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞
        ‚îÇ   ‚îî‚îÄ‚îÄ lobby/         # –õ–æ–±–±–∏
        ‚îÇ
        ‚îî‚îÄ‚îÄ components/
            ‚îî‚îÄ‚îÄ AuthModal.tsx  # ‚úÖ –ú–æ–¥–∞–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–∑–∞–≥–ª—É—à–∫–∞ —É–±—Ä–∞–Ω–∞)
```

---

## üîë –í–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend (.env):
```env
PORT=4000
NODE_ENV=production
FRONT_ORIGIN=https://bunker-zone.ru
TELEGRAM_BOT_TOKEN=<your_telegram_bot_token_here>
AUTH_RATE_WINDOW_MS=60000
AUTH_RATE_MAX=20
RATE_ROOMS_WINDOW_MS=60000
RATE_ROOMS_MAX=10
```

### Frontend (.env.production):
```env
NEXT_PUBLIC_API_URL=https://bunker-zone.ru
NEXT_PUBLIC_WS_URL=wss://bunker-zone.ru
NEXT_PUBLIC_TG_BOT_USERNAME=BunkerAuthbot
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –†–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ VPS –≤ `/srv/bunker/.env`

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

1. ‚úÖ –ö–≤–æ—Ç–∞ —Ä–∞—É–Ω–¥–∞ = 1 –≤–º–µ—Å—Ç–æ 3 ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (—Ç–µ–ø–µ—Ä—å 3-2-1)
2. ‚úÖ –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —Ä–∞—É–Ω–¥–∞–º–∏ ‚Üí –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è advanceRound()
3. ‚úÖ clearTurnTimer is not defined ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (timers.clearTurnTimer)
4. ‚úÖ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - –∑–∞–≥–ª—É—à–∫–∞ ‚Üí –£–±—Ä–∞–Ω–∞, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∞—è
5. ‚úÖ –ú–æ–¥–∞–ª–∫–∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–∞—Å—å –ø–æ—Å–ª–µ TG –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚Üí –î–æ–±–∞–≤–ª–µ–Ω setTimeout 50ms
6. ‚úÖ ESLint –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ ‚Üí –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
7. ‚úÖ –î–≤–µ –∫–Ω–æ–ø–∫–∏ (–Ω–∞—à–∞ + –≤–∏–¥–∂–µ—Ç) ‚Üí –í–∏–¥–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–£–¥–∞–ª–∏—Ç—å debug –ª–æ–≥–∏** –∏–∑ AuthModal.tsx (–º–Ω–æ–≥–æ console.log)
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—É–Ω–¥–æ–≤** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx** reverse proxy (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
4. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –æ—à–∏–±–æ–∫ (Sentry, LogRocket)
5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤** —Å Telegram

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **GitHub:** https://github.com/jester19686/YGsere
- **Production:** https://bunker-zone.ru
- **Telegram –±–æ—Ç:** @BunkerAuthbot
- **VPS —Å–µ—Ä–≤–µ—Ä:** root@5652617-oy29376.tmweb.ru

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–∏

- **–ö–æ–º–º–∏—Ç–æ–≤ —Å–¥–µ–ª–∞–Ω–æ:** 12
- **–ë–∞–≥–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 7
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** ~10
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~100+ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 04.10.2025  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 04.10.2025 21:00 MSK  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ production
